import{o as r,c as i,a as e,_ as D,x as ce,t,n as M,b as h,u as b,ae as pe,e as u,l as F,I as me,k as re,s as ie,v as I,w as U,Y as ve,C as le,G as he,ad as oe,a3 as fe,z as _,F as A,r as z,H as ne,m as $,g as y,A as B,a8 as ge,S as be,f as _e,E as L,d as xe}from"./app-C8THt9Gf.js";function we(m,x){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),e("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}function ye(m,x){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z","clip-rule":"evenodd"})])}function ke(m,x){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function $e(m,x){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Ce={class:"flex justify-between items-center gap-1.5 flex-wrap pb-3 border-b border-slate-200"},Te={class:"text-slate-500 text-sm font-normal"},je={class:"flex gap-2 items-center"},Me={class:"text-blue-500 text-sm"},Se={class:"flex justify-between items-center gap-2 flex-wrap pt-3"},Ve={class:"flex flex-col gap-1"},Ue={class:"text-slate-500 text-sm font-normal"},Be={class:"text-slate-900 text-sm"},Ae={class:"flex flex-col gap-1 overflow-auto"},ze={class:"text-slate-500 text-sm font-normal"},Ne={class:"text-slate-900 text-sm truncate max-w-60 lg:min-w-60"},Ie={class:"flex flex-col gap-1 overflow-hidden"},Le={class:"text-slate-500 text-sm font-normal"},Fe={class:"text-slate-900 text-sm truncate max-w-80 lg:min-w-80"},De={class:"h-8 w-8 bg-slate-100 rounded-2xl flex justify-center items-center"},Ee={__name:"TicketCard",props:{supportTicket:Object},setup(m){const x=ce(),g=m,f=()=>{x.push({name:"support-ticket-details",params:{ticketNumber:g.supportTicket.ticket_no}})};return(w,C)=>(r(),i("div",{class:"p-4 bg-white rounded-xl border border-slate-200 cursor-pointer",onClick:C[0]||(C[0]=V=>f())},[e("div",Ce,[e("span",Te,t(m.supportTicket.created_at),1),e("div",je,[e("span",Me,"#"+t(m.supportTicket.ticket_no),1),e("span",{class:M(["px-2 py-1 rounded-xl capitalize text-xs ticketStatus",m.supportTicket.status])},t(m.supportTicket.status),3)])]),e("div",Se,[e("div",Ve,[e("div",Ue,t(w.$t("Order Number")),1),e("div",Be,t(m.supportTicket.order_number||"N/A"),1)]),e("div",Ae,[e("div",ze,t(w.$t("Issue Type")),1),e("div",Ne,t(m.supportTicket.issue_type),1)]),e("div",Ie,[e("div",Le,t(w.$t("Subject")),1),e("div",Fe,t(m.supportTicket.subject),1)]),e("div",De,[h(b(pe),{class:"w-5 h-5 text-slate-600"})])])]))}},Pe=D(Ee,[["__scopeId","data-v-66b61d32"]]),Oe={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Re={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Ze={class:"bg-white p-5 sm:p-8 relative"},He={class:"text-slate-950 text-2xl font-medium"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ye={for:"name",class:"form-label mb-1"},We={value:"",selected:""},qe=["value"],Je={key:0,class:"text-red-500 text-sm"},Ke={for:"name",class:"form-label mb-1"},Qe={value:"",selected:""},Xe=["value"],et={key:0,class:"text-red-500 text-sm"},tt={class:"grid grid-cols-1 mt-6"},st={for:"Subject",class:"form-label mb-1"},at=["placeholder"],lt={key:0,class:"text-red-500 text-sm"},ot={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6"},nt={class:"form-label mb-1"},rt=["placeholder"],it={key:0,class:"text-red-500 text-sm"},dt={class:"form-label mb-1"},ut={for:"attachment",class:"cursor-pointer px-4 py-3 rounded-lg border border-dashed border-primary-400 flex items-center gap-2 text-primary text-xs"},ct={class:"mt-3 flex flex-wrap gap-2.5"},pt=["src"],mt=["onClick"],vt={class:"text-slate-950 text-lg font-bold mt-5 flex justify-between gap-2 flex-wrap"},ht={class:"flex justify-start items-center gap-3"},ft={class:"flex gap-1.5 items-center"},gt={class:"form-label",for:"email"},bt={class:"flex gap-1.5 items-center"},_t={class:"form-label",for:"phone"},xt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3"},wt={class:"relative rounded-md"},yt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},kt={class:"text-gray-500 sm:text-sm"},$t=["placeholder"],Ct={key:0,class:"text-red-500 text-sm"},Tt={class:"relative rounded-md"},jt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Mt={class:"text-gray-500 sm:text-sm"},St=["placeholder"],Vt={key:0,class:"text-red-500 text-sm"},Ut={class:"mt-6"},Bt=["disabled"],At={__name:"CreateTicketModal",props:{showModal:Boolean},emits:["update:showModal","ticketCreated"],setup(m,{emit:x}){const g=u(!1),f=u(!1),w=x,C=m;F(()=>C.showModal,s=>{g.value=s}),F(()=>g.value,s=>{w("update:showModal",s)});const V=me(),k=re(),T=u([]),o=u({issue_type:"",subject:"",message:"",email:"",phone:"",order_number:""}),v=u([]),l=u({}),j=u([]);ie(()=>{de(),ue()});const d=s=>{v.value.push({url:URL.createObjectURL(s.target.files[0]),file:s.target.files[0],type:s.target.files[0].type})},c=s=>{v.value.splice(s,1)},S=u(!1),p=()=>{S.value=!0;const s=new FormData;s.append("issue_type",o.value.issue_type),s.append("subject",o.value.subject),s.append("message",o.value.message),s.append("order_number",o.value.order_number?o.value.order_number:""),s.append("email",o.value.email?o.value.email:""),s.append("phone",o.value.phone?o.value.phone:"");for(let a=0;a<v.value.length;a++)s.append("attachments["+a+"]",v.value[a].file);I.post("/support-ticket",s,{headers:{Authorization:k.token}}).then(a=>{S.value=!1,g.value=!1,o.value={},v.value=[],V.success(a.data.message,{position:"bottom-left"}),w("ticketCreated",!0)}).catch(a=>{S.value=!1,l.value=a.response.data.errors})},de=()=>{I.get("/ticket-issue-types",{headers:{Authorization:k.token}}).then(s=>{T.value=s.data.data.issue_types})},ue=async()=>{I.get("/orders",{headers:{Authorization:k.token}}).then(s=>{j.value=s.data.data.orders})};return(s,a)=>(r(),i("div",null,[h(b(be),{as:"template",show:g.value},{default:U(()=>[h(b(ve),{as:"div",class:"relative z-10",onClose:a[9]||(a[9]=N=>g.value=!1)},{default:U(()=>[h(b(le),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:U(()=>a[10]||(a[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])),_:1}),e("div",Oe,[e("div",Re,[h(b(le),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:U(()=>[h(b(he),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full md:max-w-3xl"},{default:U(()=>{var N,E,P,O,R,Z,H,G,Y,W,q,J,K,Q,X,ee,te,se;return[e("div",Ze,[e("div",{class:"w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 right-4 flex justify-center items-center cursor-pointer",onClick:a[0]||(a[0]=n=>g.value=!1)},[h(b(oe),{class:"w-6 h-6 text-slate-600"})]),e("div",He,t(s.$t("Create Support Ticket")),1),e("form",{onSubmit:a[8]||(a[8]=fe(n=>p(),["prevent"])),class:"mt-4"},[e("div",Ge,[e("div",null,[e("label",Ye,t(s.$t("Order Number")),1),_(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.order_number=n),class:M(["form-input bg-transparent",l.value&&((N=l.value)!=null&&N.order_number)?"border-red-500":"border-slate-200"])},[e("option",We,t(s.$t("Select order number")),1),(r(!0),i(A,null,z(j.value,n=>(r(),i("option",{key:n.id,value:n.order_code},t(n.order_code),9,qe))),128))],2),[[ne,o.value.order_number]]),l.value&&((E=l.value)!=null&&E.order_number)?(r(),i("span",Je,t((P=l.value)==null?void 0:P.order_number[0]),1)):$("",!0)]),e("div",null,[e("label",Ke,[y(t(s.$t("Issue Type"))+" ",1),a[11]||(a[11]=e("small",{class:"text-red-500"},"*",-1))]),_(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.issue_type=n),class:M(["form-input bg-transparent",l.value&&((O=l.value)!=null&&O.issue_type)?"border-red-500":"border-slate-200"])},[e("option",Qe,t(s.$t("Select issue type")),1),(r(!0),i(A,null,z(T.value,n=>(r(),i("option",{key:n.id,value:n.name},t(n.name),9,Xe))),128))],2),[[ne,o.value.issue_type]]),l.value&&((R=l.value)!=null&&R.issue_type)?(r(),i("span",et,t((Z=l.value)==null?void 0:Z.issue_type[0]),1)):$("",!0)])]),e("div",tt,[e("div",null,[e("label",st,t(s.$t("Subject")),1),_(e("input",{type:"text",id:"Subject",placeholder:s.$t("Enter subject"),class:M(["form-input",l.value&&((H=l.value)!=null&&H.subject)?"border-red-500":"border-slate-200"]),"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.subject=n)},null,10,at),[[B,o.value.subject]]),l.value&&((G=l.value)!=null&&G.subject)?(r(),i("span",lt,t((Y=l.value)==null?void 0:Y.subject[0]),1)):$("",!0)])]),e("div",ot,[e("div",null,[e("label",nt,[y(t(s.$t("Message"))+" ",1),a[12]||(a[12]=e("small",{class:"text-red-500"},"*",-1))]),_(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.message=n),class:M(["form-input",l.value&&((W=l.value)!=null&&W.message)?"border-red-500":"border-slate-200"]),rows:"4",placeholder:s.$t("Write your message")+"..."},null,10,rt),[[B,o.value.message]]),l.value&&((q=l.value)!=null&&q.message)?(r(),i("span",it,t((J=l.value)==null?void 0:J.message[0]),1)):$("",!0)]),e("div",null,[e("label",dt,t(s.$t("File Attachment"))+" (jpg, jpeg, png, pdf) ",1),e("label",ut,[e("input",{type:"file",id:"attachment",class:"hidden",accept:"image/jpeg, image/png, image/jpg, application/pdf",onChange:d},null,32),h(b(ke),{class:"w-6 h-6"}),y(" "+t(s.$t("Click to upload or, drag and drop here")),1)]),e("div",ct,[(r(!0),i(A,null,z(v.value,(n,ae)=>(r(),i("div",{key:ae,class:"w-12 h-12 relative"},[e("img",{src:n.type!="application/pdf"?n.url:"/assets/images/pdf.png",class:"w-full h-full object-cover rounded-lg",loading:"lazy"},null,8,pt),e("button",{type:"button",class:"absolute -top-1 -right-1 bg-red-500 rounded-full w-5 h-5 text-white flex justify-center items-center border-2 border-white",onClick:Gt=>c(ae)},[h(b(oe),{class:"w-4 h-4"})],8,mt)]))),128))])])]),e("div",vt,[y(t(s.$t("Contact Info"))+" ",1),e("div",ht,[e("div",ft,[a[13]||(a[13]=e("input",{type:"checkbox",id:"email",class:"form-checkbox",checked:""},null,-1)),e("label",gt,t(s.$t("Email Address")),1)]),e("div",bt,[_(e("input",{type:"checkbox",id:"phone",class:"form-checkbox","onUpdate:modelValue":a[5]||(a[5]=n=>f.value=n)},null,512),[[ge,f.value]]),e("label",_t,t(s.$t("Phone Number")),1)])])]),e("div",xt,[e("div",null,[e("div",wt,[e("div",yt,[e("span",kt,[h(b(we),{class:"w-5 h-5"})])]),_(e("input",{type:"email",placeholder:s.$t("Enter email address"),class:M(["form-input",l.value&&((K=l.value)!=null&&K.email)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[6]||(a[6]=n=>o.value.email=n)},null,10,$t),[[B,o.value.email]])]),l.value&&((Q=l.value)!=null&&Q.email)?(r(),i("span",Ct,t((X=l.value)==null?void 0:X.email[0]),1)):$("",!0)]),e("div",null,[e("div",Tt,[e("div",jt,[e("span",Mt,[h(b(ye),{class:"w-5 h-5"})])]),_(e("input",{type:"phone",placeholder:s.$t("Enter phone number"),class:M(["form-input",l.value&&((ee=l.value)!=null&&ee.phone)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[7]||(a[7]=n=>o.value.phone=n)},null,10,St),[[B,o.value.phone]])]),l.value&&((te=l.value)!=null&&te.phone)?(r(),i("span",Vt,t((se=l.value)==null?void 0:se.phone[0]),1)):$("",!0)])]),e("div",Ut,[e("button",{class:"py-4 px-5 bg-primary text-white w-full rounded-xl",disabled:S.value},t(s.$t("Submit Ticket")),9,Bt)])],32)])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}},zt=D(At,[["__scopeId","data-v-affc5ea5"]]),Nt={class:"py-3 px-2 text-slate-800 text-lg md:text-2xl font-medium tracking-tight md:leading-loose bg-white flex justify-between gap-2 flex-wrap items-center md:pr-8 lg:pr-16"},It={class:"bg-white px-3 border-t border-slate-100 flex gap-4 md:gap-8 overflow-x-auto"},Lt={class:"statusLinkBtn",for:"Pending"},Ft={class:"statusLinkBtn",for:"Confirm"},Dt={class:"statusLinkBtn",for:"Cancelled"},Et={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6"},Pt={class:"p-3 md:p-4 xl:p-6 bg-white rounded-xl md:rounded-2xl flex flex-col gap-3 md:gap-4"},Ot={key:0},Rt={key:0,class:"flex justify-between items-center w-full mt-8 gap-4 flex-wrap"},Zt={class:"text-slate-800 text-base font-normal leading-normal"},Ht={__name:"SupportTicket",setup(m){const x=re(),g=u(!1),f=u("running"),w=u(0),C=u(0),V=u(0),k=u([]),T=u(10),o=u(10),v=u(1);ie(()=>{j(),window.scrollTo(0,0)}),F(()=>f.value,()=>{v.value=1,j()});const l=d=>{v.value=d,j()},j=()=>{axios.get("/support-tickets",{params:{page:v.value,per_page:o.value,status:f.value},headers:{Authorization:x.token}}).then(d=>{T.value=d.data.data.total,w.value=d.data.data.running,C.value=d.data.data.completed,V.value=d.data.data.cancel,k.value=d.data.data.support_tickets})};return(d,c)=>{const S=_e("vue-awesome-paginate");return r(),i("div",null,[e("div",Nt,[y(t(d.$t("Support Ticket"))+" ",1),e("button",{class:"px-3 py-2.5 bg-primary text-white rounded-lg flex items-center text-sm font-normal gap-1",onClick:c[0]||(c[0]=p=>g.value=!0)},[h(b($e),{class:"w-5 h-5"}),y(" "+t(d.$t("Create Ticket")),1)])]),e("div",It,[e("label",Lt,[_(e("input",{type:"radio","onUpdate:modelValue":c[1]||(c[1]=p=>f.value=p),name:"status",class:"sr-only",value:"Pending",id:"Pending",checked:""},null,512),[[L,f.value]]),y(" "+t(d.$t("Running"))+" ("+t(w.value)+") ",1)]),e("label",Ft,[_(e("input",{type:"radio","onUpdate:modelValue":c[2]||(c[2]=p=>f.value=p),name:"status",class:"sr-only",value:"completed",id:"Confirm"},null,512),[[L,f.value]]),y(" "+t(d.$t("Completed"))+" ("+t(C.value)+") ",1)]),e("label",Dt,[_(e("input",{type:"radio","onUpdate:modelValue":c[3]||(c[3]=p=>f.value=p),name:"status",class:"sr-only",value:"cancel",id:"Cancelled"},null,512),[[L,f.value]]),y(" "+t(d.$t("Cancel"))+" ("+t(V.value)+") ",1)])]),e("div",Et,[e("div",Pt,[(r(!0),i(A,null,z(k.value,p=>(r(),xe(Pe,{key:p.id,supportTicket:p},null,8,["supportTicket"]))),128)),k.value.length==0?(r(),i("div",Ot,[e("p",null,t(d.$t("No Ticket Found")),1)])):$("",!0)]),T.value>o.value?(r(),i("div",Rt,[e("div",Zt,t(d.$t("Showing"))+" "+t(o.value*(v.value-1)+1)+" "+t(d.$t("to"))+" "+t(o.value*(v.value-1)+k.value.length)+" "+t(d.$t("of"))+" "+t(T.value)+" "+t(d.$t("results")),1),e("div",null,[h(S,{"total-items":T.value,"items-per-page":o.value,type:"button","max-pages-shown":5,modelValue:v.value,"onUpdate:modelValue":c[4]||(c[4]=p=>v.value=p),"hide-prev-next-when-ends":!0,onClick:l},null,8,["total-items","items-per-page","modelValue"])])])):$("",!0)]),h(zt,{showModal:g.value,"onUpdate:showModal":c[5]||(c[5]=p=>g.value=p),onTicketCreated:c[6]||(c[6]=p=>j())},null,8,["showModal"])])}}},Wt=D(Ht,[["__scopeId","data-v-b96b6d66"]]);export{Wt as default};
