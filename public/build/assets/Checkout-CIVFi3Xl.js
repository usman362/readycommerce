import{k as T,p as V,q as B,o as c,c as m,F as M,r as j,a as e,t as s,u as n,_ as N,x as G,I as K,e as g,s as E,z as w,A as F,n as A,b as _,i as Q,d as ee,V as te,m as O,W as H,X as L,L as se,l as D,f as ae,w as W,Z as oe,E as I,$ as ne}from"./app-CTA2o2_i.js";import{_ as le,a as re}from"./CheckoutShippingAddress-BXsFyD-c.js";import{r as ie}from"./TrashIcon-CbsUSC36.js";import{r as de}from"./HomeIcon-CCVI28sy.js";import"./AddressForm-D9dTL5aw.js";import"./AddressFormModal-Bj_rBEm9.js";const ce={class:"space-y-4 mt-3 transition duration-300"},ue={class:"text-slate-950 text-base font-medium leading-normal"},me={class:"space-y-2 divide-y divide-slate-200"},pe={class:"w-[72px] h-[95px]"},he=["src"],_e={class:"flex flex-col gap-1 w-full"},ve={class:"text-primary text-xs font-normal leading-none"},fe={class:"text-slate-950 text-base font-normal leading-normal"},ye={class:"flex flex-wrap justify-between items-center gap-3"},xe={class:"flex items-center gap-1"},ge={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},be={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},we={class:"text-slate-800 text-base font-normal leading-normal"},$e={__name:"checkoutProducts",setup(h){T();const b=V(),t=B();return(v,f)=>(c(),m("div",ce,[(c(!0),m(M,null,j(n(t).checkoutProducts,l=>(c(),m("div",{key:l.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[e("div",ue,s(l.shop_name),1),e("div",me,[(c(!0),m(M,null,j(l.products,a=>(c(),m("div",{key:a.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",pe,[e("img",{src:a.thumbnail,class:"w-full h-full object-contain"},null,8,he)]),e("div",_e,[e("div",ve,s(a.brand),1),e("div",fe,s(a.name),1),e("div",ye,[e("div",xe,[e("div",ge,s(a.size),1),e("div",be,s(a.color),1)]),e("div",we,s(a.quantity)+" X "+s(n(b).showCurrency(a.discount_price>0?a.discount_price:a.price)),1)])])]))),128))])]))),128))]))}},R=h=>(H("data-v-51a71a4e"),h=h(),L(),h),ke={class:"p-6 bg-white rounded-2xl border border-slate-200"},Ce={class:"text-slate-950 text-xl font-medium leading-7"},Se={class:"my-4 flex justify-between gap-4"},Pe={class:"text-slate-950 text-base font-normal leading-normal"},Ie={class:"text-slate-950 text-base font-normal leading-normal"},Me={class:"my-4 flex justify-between gap-4"},je={class:"text-red-500 text-base font-normal leading-normal"},Ae={class:"text-slate-950 text-base font-normal leading-normal"},Oe=R(()=>e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),Te={class:"my-4 flex justify-between gap-4"},Ve={class:"text-slate-950 text-base font-normal leading-normal"},Be={class:"text-slate-950 text-base font-normal leading-normal"},Ue={class:"my-4 flex justify-between gap-4"},ze={class:"text-slate-950 text-base font-normal leading-normal"},De={class:"text-slate-950 text-base font-normal leading-normal"},We=R(()=>e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),Ne={class:"my-4 flex justify-between gap-4"},Ge={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ee={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Fe={class:"p-4 mt-6 bg-slate-100 rounded-xl"},He={class:"text-black text-base font-normal leading-normal"},Le={class:"relative mt-2"},Re=["placeholder"],qe={class:"absolute top-1/2 -translate-y-1/2 left-3"},Xe={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(h){const b=new G,t=B(),v=V(),f=T(),l=K(),a=g(!1),r=g(""),y=h;E(()=>{r.value=t.coupon_code});const i=()=>{r.value.length>0&&U()},p=()=>{r.value="",a.value=!1,t.coupon_code="",U()},S={component:se,props:{title:"Order Placed",message:"Your order has been placed successfully."}},d=()=>{if(!t.address){l.error("Please select shipping address",{position:"bottom-left"});return}if(y.paymentMethod==null){l.error("Please select payment method",{position:"bottom-left"});return}t.checkoutProducts.length>0?axios.post("v1/place-order",{shop_ids:t.selectedShopIds,address_id:t.address.id,payment_method:y.paymentMethod,coupon_code:r.value,note:y.note},{headers:{Authorization:f.token}}).then(o=>{t.checkoutProducts=[],t.selectedShopIds=[],t.coupon_code="",t.total_amount=0,t.delivery_charge=0,t.coupon_discount=0,t.payable_amount=0,t.fetchCart(),l(S,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let x=o.data.data.order_payment_url;if(x!=null){P(x);return}else t.showOrderConfirmModal=!0}).catch(()=>{}):l.error("Please select at least one product",{position:"bottom-left"})},P=o=>{let x=700,$=700,q=screen.width/2-x/2,X=screen.height/2-$/2,Y="popup,resizable,height="+$+",width="+x+",top="+X+",left="+q,u=window.open(o,null,Y);if(u.title="Payment Window Screen - Make Payment",u.onload=()=>{u.title="Payment Window Screen - Make Payment",u.closed&&console.log("close window")},u.focus(),u.closed){l.error("Payment Canceled",{position:"bottom-left"}),b.push({name:"home"});return}var k=setInterval(Z,1e3);function Z(){try{var z=u.location.pathname.replace(/\/order\/\d+/,""),jt=g(!1);if(z=="/payment/cancel"){u.close(),clearInterval(k),t.orderPaymentCancelModal=!0,l.error("Payment Canceled",{position:"bottom-left"}),b.push({name:"home"});return}if(z=="/payment/success"){u.close(),clearInterval(k),t.showOrderConfirmModal=!0;return}(u.closed||!u.location)&&(clearInterval(k),u.close(),t.orderPaymentCancelModal=!0)}catch{}}setTimeout(()=>{clearInterval(k),u.close()},18e4)},U=()=>{axios.post("/cart/checkout",{shop_ids:t.selectedShopIds,coupon_code:r.value},{headers:{Authorization:f.token}}).then(o=>{a.value=o.data.data.apply_coupon,t.total_amount=o.data.data.checkout.total_amount,t.delivery_charge=o.data.data.checkout.delivery_charge,t.coupon_discount=o.data.data.checkout.coupon_discount,t.payable_amount=o.data.data.checkout.payable_amount,a.value?(l.success(o.data.message,{position:"bottom-left"}),t.coupon_code=r.value):(l.error(o.data.message,{position:"bottom-left"}),t.coupon_code="")}).catch(o=>{l.error(o.response.data.message,{position:"bottom-left"})})};return(o,x)=>(c(),m("div",null,[e("div",ke,[e("div",Ce,s(o.$t("Order Summary")),1),e("div",Se,[e("div",Pe,s(o.$t("Subtotal")),1),e("div",Ie,s(n(v).showCurrency(n(t).total_amount)),1)]),e("div",Me,[e("div",je,s(o.$t("Discount")),1),e("div",Ae," -"+s(n(v).showCurrency(n(t).coupon_discount)),1)]),Oe,e("div",Te,[e("div",Ve,s(o.$t("Subtotal After Discount")),1),e("div",Be,s(n(v).showCurrency((n(t).total_amount-n(t).coupon_discount).toFixed(2))),1)]),e("div",Ue,[e("div",ze,s(o.$t("Shipping Charge")),1),e("div",De,s(n(v).showCurrency(n(t).delivery_charge)),1)]),We,e("div",Ne,[e("div",Ge,s(o.$t("Total Payable")),1),e("div",Ee,s(n(v).showCurrency(n(t).payable_amount)),1)]),e("div",Fe,[e("div",He,s(o.$t("Have a coupon"))+"? ",1),e("div",Le,[w(e("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=$=>r.value=$),class:A(["formInputCoupon pr-14 p-3",a.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Re),[[F,r.value]]),a.value?(c(),m("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:p},[_(n(ie),{class:"w-6 h-6 text-red-500"})])):(c(),m("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:i},[_(n(Q),{class:"w-6 h-6 text-white"})])),e("span",qe,[a.value?(c(),ee(n(te),{key:0,class:"w-6 h-6 text-green-500"})):O("",!0)])])])]),e("button",{class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:d},s(o.$t("Place Order")),1),_(le)]))}},Ye=N(Xe,[["__scopeId","data-v-51a71a4e"]]),C=h=>(H("data-v-b2a782e5"),h=h(),L(),h),Ze={class:"main-container"},Je={class:"flex items-center gap-2 overflow-hidden pt-4"},Ke={class:"grow w-full overflow-hidden"},Qe={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},et=C(()=>e("span",null,"/",-1)),tt=C(()=>e("span",null,"/",-1)),st={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},at={class:"col-span-1 xl:col-span-2"},ot={class:"flex gap-2 justify-between items-center"},nt={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},lt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},rt={key:0},it={class:"mt-6"},dt={class:"mb-1"},ct={class:"text-slate-950 text-xl font-medium leading-7"},ut={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},mt=["placeholder"],pt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},ht={class:"text-slate-950 text-xl font-medium leading-7"},_t={class:"mt-4 flex flex-wrap gap-4"},vt={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},ft=C(()=>e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),yt={class:"text-slate-500 text-base font-normal leading-normal"},xt={for:"card",class:"flex items-center gap-4 xl:min-w-80"},gt=C(()=>e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),bt={class:"text-slate-500 text-base font-normal leading-normal"},wt={key:0,class:"mt-5 border-t border-slate-200"},$t={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},kt={class:"mt-3 flex flex-wrap gap-4"},Ct=["for"],St=["id","value"],Pt={class:""},It=["src"],Mt={__name:"Checkout",setup(h){const b=T();new G;const t=V(),v=B(),f=g(!1),l=g(""),a=g("cash"),r=g(null),y=g(null);return E(()=>{window.scrollTo(0,0),v.coupon_code="",r.value=a.value,b.showAddressModal=!1,b.showChangeAddressModal=!1}),D(a,()=>{a.value==="card"?r.value=y.value:r.value=a.value}),D(y,()=>{a.value==="card"&&(r.value=y.value)}),(i,p)=>{const S=ae("router-link");return c(),m("div",Ze,[e("div",Je,[_(S,{to:"/",class:"w-6 h-6"},{default:W(()=>[_(n(de),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",Ke,[e("div",Qe,[e("span",null,s(i.$t("Home")),1),et,e("span",null,s(i.$t("Cart")),1),tt,e("span",null,s(i.$t("Checkout")),1)])])]),e("div",st,[e("div",at,[e("div",{class:A(["py-4 border-b tran",f.value?"border-primary":"border-slate-200"])},[e("div",ot,[e("div",nt,s(i.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:p[0]||(p[0]=d=>f.value=!f.value)},[e("div",lt," ("+s(n(v).checkoutTotalItems)+" "+s(i.$t("items"))+") ",1),_(n(oe),{class:A(["w-5 h-5 text-primary-600 transition duration-300",f.value?"rotate-180":""])},null,8,["class"])])]),f.value?(c(),m("div",rt,[_($e)])):O("",!0)],2),_(re),e("div",it,[e("div",dt,[e("span",ct,s(i.$t("Note")),1),e("span",ut," ("+s(i.$t("Optional"))+") ",1)]),w(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=d=>l.value=d),rows:"3",class:"form-input",placeholder:i.$t("Write your note")+"..."},null,8,mt),[[F,l.value]])]),e("div",pt,[e("div",ht,s(i.$t("Payment Method")),1),e("div",_t,[e("label",vt,[w(e("input",{"onUpdate:modelValue":p[2]||(p[2]=d=>a.value=d),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[I,a.value]]),ft,e("span",yt,s(i.$t("Cash on delivery")),1)]),e("label",xt,[w(e("input",{"onUpdate:modelValue":p[3]||(p[3]=d=>a.value=d),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[I,a.value]]),gt,e("span",bt,s(i.$t("Credit or Debit Card")),1)])]),_(ne,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:W(()=>[a.value==="card"?(c(),m("div",wt,[e("span",$t,s(i.$t("Available Payment Gateways")),1),e("div",kt,[(c(!0),m(M,null,j(n(t).paymentGateways,d=>(c(),m("label",{key:d.id,for:d.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[w(e("input",{"onUpdate:modelValue":p[4]||(p[4]=P=>y.value=P),id:d.name,name:"paymentGateway",type:"radio",class:"sr-only",value:d.name},null,8,St),[[I,y.value]]),e("div",Pt,[e("img",{src:d.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,It)])],8,Ct))),128))])])):O("",!0)]),_:1})])]),_(Ye,{note:l.value,paymentMethod:r.value},null,8,["note","paymentMethod"])])])}}},zt=N(Mt,[["__scopeId","data-v-b2a782e5"]]);export{zt as default};
